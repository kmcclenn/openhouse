# Initialize and Run Azure Sandbox
Ensure you have a Azure account. As part of sandbox we use Terraform to provision a resource group, storage account, and blob container within that storage account. 
## Terraform Backend
 
Terraform backend state can be stored locally or in Azure blob store. To configure this you will be setting the variables like those in `infra/recipes/terraform/azure/backend.tfvars.template`.

### Using Environment Variables
You could set the environment variables for variables to stored terraform backend state. For example, to initialize `storage_account_name` you can set the following environment variable.
`export TF_VAR_storage_account_name="foobar"`

### Using tfvars
1. Create a copy of the file backend.tfvars.template by running
`cp backend.tfvars.template backend.tfvars`.
2. Edit the backend.tfvars to configure the necessary TF backend state.

## Deployment

To deploy the sandbox, run:

### Initialization

Run `terraform init` when setting up a new configuration, changing backend settings, or modifying provider versions. You don't need to run it for regular operations like `terraform plan` and `terraform apply` unless the configuration changes.

_If using tfvars_
`terraform init -backend-config="./tfbackend.tfvars"`
_If using environment variables_
`terraform init`

### Planning & Applying

`terraform plan` to see the plan generated by terraform for the specified deployment configuration. If you are satisfied with the plan, run `terraform apply` to apply the configuration.

## Deconfiguration

Run `terraform destroy` once you are done to tear down the services you have created.